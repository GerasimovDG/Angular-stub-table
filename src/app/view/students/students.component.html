<div class="view">
  <div class="view-header">
    <h4 class="view-header__title">Список студентов</h4>
    <label class="view-header__checkbox">
      <input (click)="toggleFeature()" type="checkbox" checked="checked" />
      <div class="view-header__checkbox__text">Выделение двоечников</div>
    </label>
  </div>
  <div class="view-search">
    <input class="input view-search__input " type="text" placeholder="Поиск" [(ngModel)]="search">
    <button class="view-search__button" (click)="searchField = 'lastName'">по фамилии</button>
    <button class="view-search__button" (click)="searchField = 'firstName'">по имени</button>
    <button class="view-search__button" (click)="searchField = 'All'">по имени и фамилии</button>
  </div>
  <div class="view-filter">
    <div class="view-filter__name">Фильтр:</div>
    <input class="input view-filter__input" type="text" placeholder="По среднему баллу" [(ngModel)]="mark" (ngModelChange)="setStudentsByMark(mark)">
    <input class="input view-filter__input" type="date" placeholder="По дате рождения" [(ngModel)]="birthday" (ngModelChange)="setStudentsByBirthday(birthday)">
  </div>
  <div class="view-body table-responsive">
    <table class="table table-hover" >
      <thead class="table-header">
      <th (click)="sortTableBy('id'); sortUp = !sortUp">#</th>
      <th (click)="sortTableBy('lastName'); sortUp = !sortUp">Фамилия</th>
      <th (click)="sortTableBy('firstName'); sortUp = !sortUp">Имя</th>
      <th (click)="sortTableBy('middleName'); sortUp = !sortUp">Отчество</th>
      <th (click)="sortTableBy('birthday'); sortUp = !sortUp">Дата рождения</th>
      <th (click)="sortTableBy('averageMark'); sortUp = !sortUp">Средний балл</th>
      <th></th>
      </thead>
      <tbody class="table-body">
      <tr [ngClass]="{
            'table-body_red' : student.averageMark < 3 && getFeature(),
            'table-body_green' : isSearch(student, searchField)
          }"  *ngFor="let student of students; trackBy:trackByStudentID; let i = index">
        <td>{{i + 1}}</td>
        <td>{{student.lastName}}</td>
        <td>{{student.firstName}}</td>
        <td>{{student.middleName}}</td>
        <td>{{student.birthday | date:"dd.MM.yyyy"}}</td>
        <td>{{student.averageMark}}</td>
        <td>
          <div class="delete" (click)="deleteStudent(student)">
            <button class="delete__button"></button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
